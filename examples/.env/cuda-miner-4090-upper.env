# NVIDIA RTX 4090 — G2 device path (upper-block example: 256 blocks)
# Launch shape targets 2x SMs (128 SMs → 256 blocks) with 256 threads/block.
# This configuration uses the G2 kernel (device SHA3 + early-exit).
#
# Notes:
# - Increase/decrease ITERS to balance kernel duration vs early-exit responsiveness.
# - Pinned host buffers are harmless here (G2 doesn’t do large copy-backs) but left enabled.
# - If the embedded G2 kernel isn’t available, the engine will fall back to G1 automatically.

# Threads per block (warp multiple)
MINER_CUDA_BLOCK_DIM=256

# Total threads = blocks * threads_per_block → 256 * 256 = 65536 (256 blocks)
MINER_CUDA_THREADS=65536

# Iterations per thread (tune for your device; start with 4096 on Ada)
MINER_CUDA_ITERS=4096

# Use pinned (page-locked) host buffers (harmless in G2; helps if we fall back to G1)
MINER_CUDA_PINNED=1

# Select G2 kernel (device SHA3 + threshold + early-exit)
MINER_CUDA_MODE=g2

# Optional: force embedded image selection (default prefers cubin)
# MINER_CUDA_IMAGE=cubin
# MINER_CUDA_IMAGE=ptx

# Optional: host SHA3 workers (only used if engine falls back to G1)
# MINER_CUDA_HASH_THREADS=24

# Optional: logging
# RUST_LOG=info
